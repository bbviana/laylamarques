import {Promise} from 'es6-promise'
import $ from 'jquery'
import assign from 'object-assign'

var xhr = {
    get(url, settings) {
        return new Promise(function (resolve, reject) {
            var completeSettings = assign(settings, {
                url: url,
                type: 'GET',
                dataType: 'json',

                success(data) {
                    resolve(data);
                },

                error(xhr, status, err) {
                    reject(err);
                }
            });

            $.ajax(completeSettings);
        });
    }
};

import MockServer from './MockServer'

var xhrMock = {
    get(url, settings) {
        return new Promise(function (resolve, reject) {
            var data = MockServer(url);

            setTimeout(function(){
                resolve(data);
            }, 500);
        });
    }
};


// FIXME remover xhrMock
export default xhrMock
//export default xhr
