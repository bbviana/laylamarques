var Promise = require('es6-promise').Promise;
var $ = require('jquery');
var assign = require('object-assign');

var xhr = {
    get(url, settings) {
        return new Promise(function (resolve, reject) {
            var completeSettings = assign(settings, {
                url: url,
                type: 'GET',
                dataType: 'json',

                success(data) {
                    resolve(data);
                },

                error(xhr, status, err) {
                    reject(err);
                }
            });

            $.ajax(completeSettings);
        });
    }
};


//module.exports = xhr;

// FIXME remover Server (mock)
var MockServer = require('mock/Server');

var xhrMock = {
    get(url, settings) {
        return new Promise(function (resolve, reject) {
            var data = MockServer(url);

            setTimeout(function(){
                resolve(data);
            }, 500);
        });
    }
};

module.exports = xhrMock;